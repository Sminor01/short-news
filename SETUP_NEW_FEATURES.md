# Setup Guide: –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ - –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø

## üö® –í–∞–∂–Ω–æ: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –í–°–ï —à–∞–≥–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É

---

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø—É—â–µ–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PostgreSQL
docker ps | grep postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis  
docker ps | grep redis

# –ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose up -d postgres redis
```

---

## –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
cd backend

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω alembic –≥–ª–æ–±–∞–ª—å–Ω–æ
alembic upgrade head

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Python module
python -m alembic upgrade head

# –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ poetry
poetry run alembic upgrade head
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
INFO  [alembic.runtime.migration] Running upgrade b5037d3c878c -> c1d2e3f4g5h6, add_digest_and_notifications
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

## –®–∞–≥ 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–í–ê–ñ–ù–û:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:

```bash
cd backend

# –í–∞—Ä–∏–∞–Ω—Ç 1
python scripts/init_all_settings.py

# –í–∞—Ä–∏–∞–Ω—Ç 2  
python -m scripts.init_all_settings

# –í–∞—Ä–∏–∞–Ω—Ç 3
poetry run python scripts/init_all_settings.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
INFO - Created 1 user preferences
INFO - Created 1 notification settings
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç `UserPreferences` –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç `NotificationSettings` –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

---

## –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ Backend

```bash
cd backend

# –í–∞—Ä–∏–∞–Ω—Ç 1
uvicorn main:app --reload

# –í–∞—Ä–∏–∞–Ω—Ç 2
python -m uvicorn main:app --reload

# –í–∞—Ä–∏–∞–Ω—Ç 3
poetry run uvicorn main:app --reload
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–æ–≤—ã–µ endpoints:
- ‚úÖ `/api/v1/digest/daily`
- ‚úÖ `/api/v1/digest/weekly`
- ‚úÖ `/api/v1/notifications/`
- ‚úÖ `/api/v1/competitors/compare`
- ‚úÖ `/api/v1/users/preferences/digest`

---

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ Frontend

–í **–Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**:

```bash
cd frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev server
npm run dev
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173

---

## –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### 6.1 –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

```
http://localhost:5173/login
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ

### 6.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

```
http://localhost:5173/digest-settings
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç—ã
- ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É (daily/weekly/custom)
- ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç (short/detailed)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "Save Settings" —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Failed to load":**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab - –∫–∞–∫–æ–π status code?
- –ï—Å–ª–∏ 404 - –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –®–∞–≥—É 3

### 6.3 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**Notification Center –≤ Header:**
- ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–∫–æ–Ω–∫–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è dropdown
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "No new notifications" (–µ—Å–ª–∏ –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
```
http://localhost:5173/notifications
```

- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∏–ª–∏ "No notifications")

### 6.4 –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤

```
http://localhost:5173/competitor-analysis
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ Dropdown —Å –∫–æ–º–ø–∞–Ω–∏—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å 2-5 –∫–æ–º–ø–∞–Ω–∏–π
- ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "Compare Companies" –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑

**–¢–µ—Å—Ç:**
1. –í—ã–±–µ—Ä–∏—Ç–µ 2 –∫–æ–º–ø–∞–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä OpenAI –∏ Anthropic)
2. –ù–∞–∂–º–∏—Ç–µ "Compare Companies"
3. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã

---

## –®–∞–≥ 7: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Celery –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

**Terminal 3 - Celery Worker:**
```bash
cd backend
celery -A celery_app worker --loglevel=info
# –∏–ª–∏
python -m celery -A celery_app worker --loglevel=info
```

**Terminal 4 - Celery Beat:**
```bash
cd backend
celery -A celery_app beat --loglevel=info
# –∏–ª–∏
python -m celery -A celery_app beat --loglevel=info
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í –ª–æ–≥–∞—Ö Celery Beat –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
beat: Starting...
Scheduler: Sending due task generate-daily-digests
Scheduler: Sending due task check-company-activity
```

---

## –®–∞–≥ 8: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Telegram

### 8.1 –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

### 8.2 –î–æ–±–∞–≤—å—Ç–µ –≤ .env

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHANNEL_ID=@your_channel  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### 8.3 –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
# Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ backend
# –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞:
uvicorn main:app --reload
```

### 8.4 –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Chat ID
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `/digest-settings`
5. –í–∫–ª—é—á–∏—Ç–µ "Send to Telegram"
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

---

## –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ ‚úÖ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (`alembic upgrade head`)
- [ ] UserPreferences —Å–æ–∑–¥–∞–Ω—ã (`python scripts/init_all_settings.py`)
- [ ] Backend –∑–∞–ø—É—â–µ–Ω (http://localhost:8000/docs —Ä–∞–±–æ—Ç–∞–µ—Ç)
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω (http://localhost:5173 —Ä–∞–±–æ—Ç–∞–µ—Ç)
- [ ] –ú–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- [ ] `/digest-settings` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] `/notifications` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] `/competitor-analysis` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] NotificationCenter –≤–∏–¥–µ–Ω –≤ Header

---

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ùå –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

**–û—à–∏–±–∫–∞:** `Target database is not up to date`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd backend
alembic stamp head  # –°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Ä—Å–∏—é
alembic upgrade head  # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–Ω–æ–≤–∞
```

### ‚ùå 404 –ø—Ä–∏ GET /api/v1/users/preferences/digest

**–ü—Ä–∏—á–∏–Ω–∞:** –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç preferences

**–†–µ—à–µ–Ω–∏–µ:**
```bash
python scripts/init_all_settings.py
```

### ‚ùå 500 Internal Server Error

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –≤ backend

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ uvicorn
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

### ‚ùå Frontend –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∏ TypeScript

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd frontend
npm install  # –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### ‚ùå CORS error

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å frontend

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:** `backend/app/core/config.py`
```python
ALLOWED_HOSTS: List[str] = [
    "http://localhost:3000",
    "http://localhost:5173",  # <-- –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
]
```

---

## –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:

1. ‚úÖ PostgreSQL + Redis (Docker)
2. ‚úÖ Backend (uvicorn)
3. ‚úÖ Frontend (npm run dev)
4. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
5. ‚úÖ init_all_settings.py –≤—ã–ø–æ–ª–Ω–µ–Ω

**Celery –∏ Telegram - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∞!**

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. –ó–∞–π—Ç–∏ –Ω–∞ http://localhost:5173/digest-settings
2. –í–∫–ª—é—á–∏—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç—ã
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
4. –ó–∞–π—Ç–∏ –Ω–∞ http://localhost:5173/competitor-analysis
5. –°—Ä–∞–≤–Ω–∏—Ç—å 2 –∫–æ–º–ø–∞–Ω–∏–∏

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TROUBLESHOOTING_DIGESTS.md`

